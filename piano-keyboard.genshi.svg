<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:py="http://genshi.edgewall.org/" xml:space="preserve">
<?python
from book_helpers import *
octaves = 3
height = 120.0
height_black = height * 2/3
total_width = 160.0
width_black = total_width / 12
width_white = total_width / 7
width_white_inner = width_white - 1
c_tones = tones[3:] + tones[:3]
white_notes = [index for index, tone in enumerate(c_tones + [c_tones[0]]) if len(tone) == 1]
black_notes = [index for index, tone in enumerate(c_tones) if len(tone) >  1]
hue_cycle = list(tone_cycle(7))
colors = get_lab_spread_colors(saturation=1.0, value=0.6)
hue_colors = [colors[hue_cycle.index((index+3)%12)] for index in range(12)]
bg_colors = [color.LighterColor(0.6) for color in hue_colors]
?>
<div py:for="octave in range(octaves)" py:strip="True">
    <rect py:for="index in white_notes[:-1]" style="fill: ${bg_colors[index].html}; stroke: ${hue_colors[index].html};" x="${octave*total_width + (width_white)*white_notes.index(index)}" y="0" width="${width_white_inner}" height="${height}"/>
    <rect py:for="index in white_notes[:-1]" style="fill: ${hue_colors[index].html}; stroke: ${hue_colors[index].html};" x="${octave*total_width + (width_white)*white_notes.index(index)}" y="${height*7/9}" width="${width_white}" height="${height/9}"/>
    <rect py:for="index in black_notes" style="fill: ${bg_colors[index].html}; stroke: ${hue_colors[index].html};" x="${octave*total_width + (width_white)*white_notes.index(index+1) - width_black/2}" y="0" width="${width_black}" height="${height_black}"/>
    <rect py:for="index in black_notes" style="fill: ${hue_colors[index].html}; stroke: ${hue_colors[index].html};" x="${octave*total_width + (width_white)*white_notes.index(index+1) - width_black/2}" y="${height_black*7/9}" width="${width_black}" height="${height_black/9}"/>
</div>
</svg>

