<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:py="http://genshi.edgewall.org/">
<head>
<title>Harmonic Hues</title>
<?python
from book_helpers import *
MATPLOTLIB_COLORS = list(get_matplotlib_colors())
?>
</head>
<body>

<h3>Color Mapping</h3>

<p>We have so far two spaces for <a title="You model tones with one L - they're not very L-ish">modeling</a> tones (the circle of fifths, and the more complex but satisfying torus space), and a number of spaces for <a title="You model colors with two Ls. Really">modelling</a> colors. Let's now consider appropriate mappings between the spaces.</p>

<h4>Simple hue projection</h4>

<p>The key feature of the tone spaces is that they are cyclical. The only color space that is directly cyclical is the HSV color space, in the hue dimension. As a first attempt, let's map the circle of fifths onto the hue dimension whilst keeping saturation and value fixed.</p>

<table>
 <tr><th>Fifths Order</th><th>Semitone Order</th><th>Torus Plot</th></tr>
 <tr><td><img src="${draw_hue_tone_circle.save(7, hues_function=get_spread_hues)}"/></td><td><img src="${draw_hue_tone_circle.save(1, hues_function=get_spread_hues)}"/></td><td><img src="${draw_hue_torus_tone_circle.save(hues_function=get_spread_hues)}"/></td></tr>
</table>

<p>This has some obvious advantages - related tones seem fairly similar etc - along with the logical disadvantage that since the circle of fifths maps major seconds as closer than major thirds, these differences come through in the color space. This is because we are mapping the &gamma; angle in the torus to hue, but doing nothing with the &theta; angle.</p>

<h4>Adding another circular dimension</h4>

<p>It would be ideal if the color space had an additional circular dimension, but it does not. Trying to use the other dimensions to approximate them is not satisfying - the consistent strength of the colors in the simpler mapping seems to be of more advantage than the variation in shades shown here:<br/>
 <img src="${draw_hue_tone_circle.save(hues_function=get_hsv_circle_hues)}"/>
</p>

<p>Another possibility is to use something other than color to represent the &theta; angle in the torus; a simple example is an actual rotation of a line</p>

<table>
 <tr><th>Fifths Order</th><th>Semitone Order</th></tr>
 <tr><td><img src="${draw_hue_rotation_tone_circle.save(7, hues_function=get_spread_hues)}"/></td><td><img src="${draw_hue_rotation_tone_circle.save(1, hues_function=get_spread_hues)}"/></td></tr>
</table>

<h4>Using the Lab color space</h4>

<p>Visually, there is still an issue though - the greens are not as spread out as the other colors and are harder to distinguish. This can be addressed by using the Lab color space to select colors with the same saturation and value, but with hue values chosen to optimize the distance in that space. However, the Lab delta spaces still does not achieve anything uniform perceptual difference over large distances; using defined Delta-E functions on this space can improve the distribution as shown at right (and these deltas will be used to spread the hues from here onwards):<br/>
 <img src="${draw_lab_hues.save()}"/><img src="${draw_lab_delta_hues.save()}"/>
</p>

<p>These selections then result in more easily differentiated hues:</p>
<table>
 <tr><th>Fifths Order</th><th>Torus Plot</th></tr>
 <tr><td><img src="${draw_hue_tone_circle.save(hues_function=get_delta_spread_hues)}"/></td><td><img src="${draw_hue_torus_tone_circle.save(hues_function=get_delta_spread_hues)}"/></td></tr>
</table>

<p>Combining this with the rotation we had earlier gives the following:</p>
<table>
 <tr><th>Fifths Order</th><th>Semitone Order</th></tr>
 <tr><td><img src="${draw_hue_rotation_tone_circle.save(7, hues_function=get_delta_spread_hues)}"/></td><td><img src="${draw_hue_rotation_tone_circle.save(1, hues_function=get_delta_spread_hues)}"/></td></tr>
</table>

</body>
</html>
