<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:py="http://genshi.edgewall.org/">
<head>
<title>Harmonic Hues</title>
<?python
from book_helpers import *
?>
</head>
<body>
<h1>Harmonic Hues</h1>

<h2>Introduction</h2>
<p>This is a system for relating musical pitch to visual phenomenen (especially colour). The aim is to find a correspondence between these different concepts that will function intuitively, especially in conveying the harmonic relationships between different pitches.</p>

<h3>Background</h3>
<p>My daughter has a little keyboard - you blow into it, and press down the notes, and depending on whether a note is depressed or not, the sound is directed to an output pipe of the appropriate pitch. The keyboard follows the normal piano keyboard layout, except that the keys that are normally "white" are coloured. All the keys are also numbered, but the "black" keys remain black. There's a book that accompanies it with music for some simple songs - written in the normal musical script, but the note heads are coloured to correspond to the colours on the keyboard.</p>
<p>This struck me as being inadequate and non-optimal, since there seemed to be no real rationale between the colours chosen - and of course the distinction between "black" and "white" keys seemed arbritrary.</p>
<p>At the same time I was talking to a friend who was doing a simple spectogram visualisation of sound, and thinking that it would be great if you could see the harmonic relationship between different frequencies - perhaps a spiral arrangement where each successive octave was at the same angle from the center would mean that musically equivalent intervals would have a direct geometric counterpart.</p>
<p>These ideas led naturally to the questions and results below.</p>

<h3>Goal: Colouring Notes</h3>
<p>Is it possible to map the set of pitch-frequencies in the Western 12-tone scale onto a set of colours, in such a way that:</p>
<ul>
    <li>Any two frequencies with the same pitch (i.e. a whole number of octaves apart) have the same colour</li>
    <li>The visual difference between two pitches is approximately proportional to how harmonious or dischordant they are when played together - so that a perfect fifth would be much closer than an augmented fourth</li>
</ul>

<h4>Notes on Pitch</h4>
<p>The twelve-tone system was derived as a compromise between the natural harmonics generated on physical instruments, and the desire to be able to play in different keys without complicated tuning. This is all described well elsewhere.</p>

<h3>Some Maths</h3>
<p>Starting with that basic idea leads immediately to the following:</p>
<ul>
    <li>The visual difference between pitches should be constant for any particular interval</li>
</ul>
<p>If we treat the pitch-space and the colour-space as two spaces, with a mapping between them, we can define this mathematically.</p>

<h4>Harmonic Difference</h4>
<p>The first goal is to find a function <tt>hd</tt> that approximates the <i>harmonic difference</i> between two frequencies. The result should be low for frequencies that are close harmonies of each other, and high for frequencies that aren't. Different octaves of the same tone will have zero harmonic difference. The function is a metric between the points in the frequency space.</p>
<pre>
hd(a, a) = 0                    # identity
hd(a, 2a) = 0                   # octaves
hd(a, b) = hd(b, a)             # commutative
hd(a, b) = hd(a, 2b)            # octaves
hd(a, b) + hd(b, c) &gt;= hd(a, c) # convex ?
hd(a, b) = hd(ra, rb)           # transposition
hd(a, 3a) = 1                   # perfect fifth set
</pre>

<h4>Geometry</h4>
<p>In pitch, there are twelve tones. Because 12 is not a prime, intervals of 3 (a minor third) and 4 (a major third) form cycles: The intervals generated by repeated major thirds comprise an "equilateral triangle" - each side must be the same length. Likewise the intervals generated by repeated minor thirds comprise a "square" - each side must be the same length.</p>
<p>A <b>circle of fifths</b> may be produced where the twelve tones are arranged into a cycle where adjacent tones are separated by a perfect fifth (7 semi-tones). (You can get such cycles on any interval other than major or minor thirds, and their inverses). This is advantageous because a perfect fifth is the closest harmony other than an octave, being derived from dividing a pitch by 3 (the lowest natural number other than 2 which produces octaves).</p>

<h4>Distance around the circle of fifths</h4>
<p>Basing the difference directly on the distance between two points on the circle of fifths is simple; the first table contains tones in the order of the circle of fifths, the second on their standard pitch-based order:</p>
<table>
<tr><td py:for="i in tone_cycle(7)">${tones[i]}</td></tr>
<tr><td py:for="i in tone_cycle(7)">${i}</td></tr>
<tr><td py:for="i in range(12)">${i}</td></tr>
</table>
<table>
<tr><td py:for="tone in tones">${tone}</td></tr>
<tr><td>7</td><td>2</td><td>9</td><td>4</td><td>11</td><td>6</td><td>1</td><td>8</td><td>3</td><td>10</td><td>5</td><td>0</td></tr>
</table>
<p>The equation <tt>hd(a, b) = p(a) - p(b) (mod 12)</tt> then trivially satisfies some of the above conditions for harmonic difference.</p>

<h4>Colour Mapping</h4>
<p>The simplest way to map such a cyclical system to the colour space is to use the concept of "hue" (which corresponds to the most basic concept of colours - the rainbow is the most classic example of this, and it forms a cyclical space). Using the HSV colour space ...</p>

</body>
</html>
